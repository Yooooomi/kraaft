{"version":3,"sources":["assets/store.ts","scenes/Conversation/index.module.css","scenes/Conversation/components/MessageRenderer/index.module.css","components/RoundContent/index.module.css","components/MessageContent/index.module.css","scenes/Conversation/components/ImageMessageRenderer/index.module.css","components/Layout/components/Header/index.module.css","components/Layout/index.module.css","scenes/Conversation/index.tsx","scenes/Conversation/components/TextMessageRenderer/index.module.css","assets/date.tsx","components/RoundContent/index.tsx","components/MessageContent/index.tsx","scenes/Conversation/components/TextMessageRenderer/index.tsx","scenes/Conversation/components/ImageMessageRenderer/index.tsx","scenes/Conversation/components/MessageRenderer/index.tsx","components/Layout/components/Header/index.tsx","components/Layout/index.tsx","app.tsx","reportWebVitals.ts","index.tsx"],"names":["store","currentUserId","users","id","username","messages","type","senderId","createdAt","content","url","caption","module","exports","Conversation","onChange","useState","textInput","setTextInput","fileInput","setFileInput","sendMessage","useCallback","ev","a","preventDefault","trim","length","Date","getTime","Buffer","arrayBuffer","buf","from","newMessage","toString","className","s","root","map","msg","k","top","bot","standalone","mine","cl","message","showName","showDate","typing","onSubmit","value","currentTarget","placeholder","htmlFor","file","style","display","e","files","pad","nb","padStart","RoundContent","children","topleft","topright","bottomleft","bottomright","botleft","botright","MessageContent","rounded","renderedContent","useMemo","text","usersTagged","us","occurences","index","indexOf","push","user","filter","allTags","oc","flat","occurence","sort","b","lastIndex","elements","forEach","tag","element","slice","FormatMessage","notmine","TextMessageRenderer","ImageMessageRenderer","image","src","alt","GetMessageComponent","MessageRenderer","date","open","setOpen","onClick","name","find","getDate","getMonth","getFullYear","getHours","getMinutes","Header","Layout","App","storeMessages","setMessages","sorted","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c81c732.chunk.js","sourcesContent":["import { User, Message } from './types';\n\ninterface Store {\n  currentUserId: string;\n  users: User[];\n  messages: Message[];\n}\n\nexport const store: Store = {\n  currentUserId: 'maxime@kraaft.co',\n  users: [\n    {\n      id: 'maxime2@kraaft.co',\n      username: 'Maxime',\n    },\n    {\n      id: 'maxime@kraaft.co',\n      username: 'Maxime Blanchard',\n    },\n    {\n      id: 'cedric@kraaft.co',\n      username: 'Cedric Boidin',\n    },\n  ],\n  messages: [\n    {\n      id: 'JOyCwtqoK',\n      type: 'text',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618056833265,\n      content:\n        \"Did you know @Cedric Boidin that the University of Iowa's locker room is painted pink? I wonder why?\",\n    },\n    {\n      id: 'yTFQY-vpSu',\n      type: 'text',\n      senderId: 'cedric@kraaft.co',\n      createdAt: 1618056839996,\n      content:\n        'I think I did hear something about that. I imagine it is an attempt to psych the other team out.',\n    },\n    {\n      id: 'yTFQY-vpSy',\n      type: 'text',\n      senderId: 'cedric@kraaft.co',\n      createdAt: 1618056839997,\n      content: 'I think',\n    },\n    {\n      id: '6ZzP46ndf4',\n      type: 'image',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618056869148,\n      url: 'https://i.imgur.com/s7WucBN.png',\n      caption: `So, it would be in the visiting team's locker room but not their own?`,\n    },\n    {\n      id: 'Gee3s5UVi2',\n      type: 'image',\n      senderId: 'cedric@kraaft.co',\n      createdAt: 1618056882696,\n      url: 'https://i.imgur.com/WRgTbTg.png',\n      caption: `Right @Maxime. Teams do all kinds of things to bother the competition. I've heard of teams having heated benches in the winter for themselves but not for the visitors.`,\n    },\n    {\n      id: '6Fyn5NwJeA',\n      type: 'text',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618056893845,\n      content: `I would hate a cold bench. Then again, I wouldn't want to be some place that cold or watching football.`,\n    },\n    {\n      id: 'sPJVnJGjHX',\n      type: 'image',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618056917999,\n      url: 'https://i.imgur.com/9OAvz8R.png',\n      caption: `I'd rather watch it inside where it's warm. @Cedric Boidin Have you heard about the Georgia Tech-Cumberland game of 1916?`,\n    },\n    {\n      id: 'IHf9wxvqUV',\n      type: 'text',\n      senderId: 'cedric@kraaft.co',\n      createdAt: 1618056927368,\n      content: 'No, what happened in that game?',\n    },\n    {\n      id: '8ZDFgmLsYW',\n      type: 'image',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618056949966,\n      url: 'https://i.imgur.com/wVLumym.jpg',\n      caption: `Georgia Tech defeated Cumberland but here's the thing, they defeated them by a score of 222-0!`,\n    },\n    {\n      id: '_IaJIIhFyN',\n      type: 'image',\n      senderId: 'cedric@kraaft.co',\n      createdAt: 1618056972544,\n      url: 'https://i.imgur.com/RHqQW9F.png',\n      caption: 'That is insane. How could that even happen?',\n    },\n    {\n      id: '5HMCClTDka',\n      type: 'text',\n      senderId: 'maxime@kraaft.co',\n      createdAt: 1618057001918,\n      content: `I don't know but it did.  It's the highest scoring game in history.`,\n    },\n  ],\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Conversation_root__1WU0t\",\"messages\":\"Conversation_messages__30bAd\",\"message\":\"Conversation_message__3eC1Z\",\"standalone\":\"Conversation_standalone__jcD1e\",\"mine\":\"Conversation_mine__1VMQ8\",\"bot\":\"Conversation_bot__3MUsF\",\"typing\":\"Conversation_typing__17R8-\",\"file\":\"Conversation_file__16skm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"MessageRenderer_root__1cDsm\",\"name\":\"MessageRenderer_name__1W2wQ\",\"date\":\"MessageRenderer_date__36vaB\",\"open\":\"MessageRenderer_open__12Pba\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"RoundContent_root__3jMK7\",\"topleft\":\"RoundContent_topleft__1gn5p\",\"topright\":\"RoundContent_topright__-Xuc-\",\"botleft\":\"RoundContent_botleft__1WVyZ\",\"botright\":\"RoundContent_botright__3QzAY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"MessageContent_root__26CH8\",\"mine\":\"MessageContent_mine__1CUIH\",\"notmine\":\"MessageContent_notmine__3dy8H\",\"tag\":\"MessageContent_tag__3qsIo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ImageMessageRenderer_root___RPJq\",\"image\":\"ImageMessageRenderer_image__1h0Bl\",\"text\":\"ImageMessageRenderer_text__1kl0e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Header_root__2xzr1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Layout_content__2ZQnQ\"};","import React, { useCallback, useEffect, useState } from 'react';\nimport cl from 'classnames';\nimport { store } from '../../assets/store';\nimport { Message as MessageType, Nullable } from '../../assets/types';\nimport Message from './components/MessageRenderer';\nimport s from './index.module.css';\n\ninterface ConversationProps {\n  messages: MessageType[];\n  onChange: (msg: MessageType[]) => void;\n}\n\n// Time after which a message is considered as a new conversation after the last one\nconst NEW_CONVERSATION_THRESHOLD_MS = 120 * 1000;\n\nfunction Conversation({ messages, onChange }: ConversationProps) {\n  const [textInput, setTextInput] = useState('');\n  const [fileInput, setFileInput] = useState<Nullable<File>>(null);\n\n  const sendMessage = useCallback(\n    async (ev) => {\n      ev.preventDefault();\n      if (textInput.trim().length === 0) return;\n\n      let newMessage: MessageType;\n      const createdAt = new Date().getTime();\n      const id = `message-${messages.length}`;\n      if (fileInput != null) {\n        const buf = Buffer.from(await fileInput.arrayBuffer());\n        newMessage = {\n          type: 'image',\n          caption: textInput,\n          createdAt,\n          id,\n          senderId: store.currentUserId,\n          url: `data:image/jpeg;base64,${buf.toString('base64')}`,\n        };\n      } else {\n        newMessage = {\n          type: 'text',\n          content: textInput,\n          createdAt,\n          id,\n          senderId: store.currentUserId,\n        };\n      }\n      setTextInput('');\n      setFileInput(null);\n      onChange([...messages, newMessage]);\n    },\n    [messages, onChange, textInput, fileInput],\n  );\n\n  // const scrollbot = useCallback(() => {\n  //   window.scrollTo(0, window.document.body.scrollHeight);\n  // }, []);\n\n  // useEffect(() => {\n  //   const unlisten = window.addEventListener('load', scrollbot);\n  //   scrollbot();\n  //   return unlisten;\n  // }, [messages, scrollbot]);\n\n  return (\n    <div className={s.root}>\n      <div className={s.messages}>\n        {messages.map((msg, k, a) => {\n          const top = k === 0 || a[k - 1].senderId !== msg.senderId;\n          const bot = k === a.length - 1 || a[k + 1].senderId !== msg.senderId;\n\n          const standalone =\n            k === 0 ||\n            k === a.length - 1 ||\n            a[k + 1].createdAt - msg.createdAt > NEW_CONVERSATION_THRESHOLD_MS;\n          const mine = store.currentUserId === msg.senderId;\n\n          return (\n            <div\n              key={msg.id}\n              className={cl(\n                s.message,\n                mine && s.mine,\n                bot && s.bot,\n                standalone && s.standalone,\n              )}>\n              <Message\n                message={msg}\n                showName={top}\n                showDate={standalone}\n                mine={mine}\n                top={top}\n                bot={bot}\n              />\n            </div>\n          );\n        })}\n      </div>\n      <form className={s.typing} onSubmit={sendMessage}>\n        <input\n          value={textInput}\n          onChange={(ev) => setTextInput(ev.currentTarget.value)}\n          placeholder=\"Write a message...\"\n        />\n        <label htmlFor=\"upload\">\n          <span className={s.file}>File</span>\n          <input\n            style={{ display: 'none' }}\n            id=\"upload\"\n            type=\"file\"\n            onChange={(e) => setFileInput(e?.currentTarget?.files?.[0] || null)}\n          />\n        </label>\n        <button type=\"submit\">Send</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Conversation;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"TextMessageRenderer_root__2BfoL\"};","const pad = (nb: number) => nb.toString().padStart(2, '0');\nexport const dateToMessageTime = (date: Date) =>\n  `${pad(date.getDate())}/${pad(date.getMonth())}/${pad(\n    date.getFullYear(),\n  )} - ${pad(date.getHours())}:${pad(date.getMinutes())}`;\n","import React from 'react';\nimport cl from 'classnames';\nimport s from './index.module.css';\n\ninterface RoundContentProps {\n  children: React.ReactNode;\n  className?: string;\n  topleft?: boolean;\n  topright?: boolean;\n  bottomleft?: boolean;\n  bottomright?: boolean;\n}\n\nfunction RoundContent({\n  children,\n  className,\n  topleft,\n  topright,\n  bottomleft,\n  bottomright,\n}: RoundContentProps) {\n  return (\n    <div\n      className={cl(\n        s.root,\n        topleft && s.topleft,\n        topright && s.topright,\n        bottomleft && s.botleft,\n        bottomright && s.botright,\n        className,\n      )}>\n      {children}\n    </div>\n  );\n}\n\nexport default RoundContent;\n","import React, { useMemo } from 'react';\nimport cl from 'classnames';\nimport { store } from '../../assets/store';\nimport s from './index.module.css';\nimport RoundContent from '../RoundContent';\n\ninterface MessageContentProps {\n  content: string;\n  mine: boolean;\n  className?: string;\n  rounded?: {\n    topleft?: boolean;\n    topright?: boolean;\n    bottomleft?: boolean;\n    bottomright?: boolean;\n  };\n}\n\nconst FormatMessage = (text: string) => {\n  let usersTagged = store.users\n    .map((us) => {\n      const occurences = [];\n      let index = 0;\n      while (index !== -1) {\n        index = text.indexOf(us.username, index);\n        if (index !== -1) {\n          occurences.push(index);\n          index += 1;\n        }\n      }\n      return { user: us, occurences };\n    })\n    .filter((e) => e.occurences.length > 0);\n  usersTagged = usersTagged\n    .filter((user) => {\n      // eslint-disable-next-line no-param-reassign\n      user.occurences = user.occurences.filter(\n        (oc) => oc !== 0 && text[oc - 1] === '@',\n      );\n      return user.occurences.length > 0;\n    })\n    .flat();\n  const allTags = usersTagged\n    .map((user) => {\n      return user.occurences.map((oc) => ({ occurence: oc, user: user.user }));\n    })\n    .flat()\n    .sort((a, b) => a.occurence - b.occurence);\n  let lastIndex = 0;\n  const elements = [];\n  allTags.forEach((tag) => {\n    const element = text.slice(lastIndex, tag.occurence - 1);\n    elements.push(element);\n    elements.push(<span className={s.tag}>@{tag.user.username}</span>);\n    lastIndex = tag.occurence + tag.user.username.length;\n  });\n  elements.push(text.slice(lastIndex, text.length));\n  return elements;\n};\n\nfunction MessageContent({\n  content,\n  mine,\n  className,\n  rounded,\n}: MessageContentProps) {\n  const renderedContent = useMemo(() => FormatMessage(content), [content]);\n\n  return (\n    <RoundContent\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...rounded}\n      className={cl(s.root, mine ? s.mine : s.notmine, className)}>\n      {renderedContent}\n    </RoundContent>\n  );\n}\n\nexport default MessageContent;\n","import React from 'react';\nimport cl from 'classnames';\nimport { TextMessage } from '../../../../assets/types';\nimport MessageContent from '../../../../components/MessageContent';\nimport { MessageTypeRendererProps } from '../types';\nimport s from './index.module.css';\n\nfunction TextMessageRenderer({\n  message: { content },\n  mine,\n  top,\n  bot,\n}: MessageTypeRendererProps<TextMessage>) {\n  return (\n    <div className={cl(s.root)}>\n      <MessageContent\n        content={content}\n        mine={mine}\n        rounded={{\n          topleft: mine || (!mine && top),\n          topright: (mine && top) || !mine,\n          bottomleft: mine || (!mine && bot),\n          bottomright: (mine && bot) || !mine,\n        }}\n      />\n    </div>\n  );\n}\n\nexport default TextMessageRenderer;\n","import React from 'react';\nimport { ImageMessage } from '../../../../assets/types';\nimport MessageContent from '../../../../components/MessageContent';\nimport RoundContent from '../../../../components/RoundContent';\nimport { MessageTypeRendererProps } from '../types';\nimport s from './index.module.css';\n\nfunction ImageMessageRenderer({\n  message: { caption, url },\n  mine,\n  top,\n}: MessageTypeRendererProps<ImageMessage>) {\n  return (\n    <div className={s.root}>\n      <RoundContent\n        topleft={mine || (!mine && top)}\n        topright={(mine && top) || !mine}>\n        <img className={s.image} src={url} alt=\"message\" />\n      </RoundContent>\n      <MessageContent\n        content={caption}\n        mine={mine}\n        className={s.text}\n        rounded={{ bottomleft: true, bottomright: true }}\n      />\n    </div>\n  );\n}\n\nexport default ImageMessageRenderer;\n","import React, { useState } from 'react';\nimport cl from 'classnames';\nimport { store } from '../../../../assets/store';\nimport { dateToMessageTime } from '../../../../assets/date';\nimport s from './index.module.css';\nimport { Message } from '../../../../assets/types';\nimport TextMessageRenderer from '../TextMessageRenderer';\nimport ImageMessageRenderer from '../ImageMessageRenderer';\n\nfunction GetMessageComponent(\n  message: Message,\n  mine: boolean,\n  top: boolean,\n  bot: boolean,\n) {\n  if (message.type === 'text')\n    return (\n      <TextMessageRenderer message={message} mine={mine} top={top} bot={bot} />\n    );\n  if (message.type === 'image')\n    return (\n      <ImageMessageRenderer message={message} mine={mine} top={top} bot={bot} />\n    );\n}\n\ninterface MessageRendererProps {\n  showDate: boolean;\n  showName: boolean;\n  message: Message;\n  mine: boolean;\n  top: boolean;\n  bot: boolean;\n}\n\nfunction MessageRenderer({\n  showDate,\n  showName,\n  message,\n  top,\n  bot,\n  mine,\n}: MessageRendererProps) {\n  // Did not succeed to remove the cast here\n  // The type of the Class variable should be determined by the props.type variable\n  // Then the message prop is always the same type as the prop required by the Class component\n  const [open, setOpen] = useState(false);\n\n  return (\n    <button type=\"button\" onClick={() => setOpen(!open)} className={s.root}>\n      <div className={cl(s.name, (showName || open) && s.open)}>\n        {/* Would be better here to access the user through a hashmap, but the store is fake anyways */}\n        {store.users.find((e) => e.id === message.senderId)?.username}\n      </div>\n      <div>{GetMessageComponent(message, mine, top, bot)}</div>\n      <div className={cl(s.date, (showDate || open) && s.open)}>\n        {dateToMessageTime(new Date(message.createdAt))}\n      </div>\n    </button>\n  );\n}\n\nexport default MessageRenderer;\n","import React from 'react';\nimport s from './index.module.css';\n\nfunction Header() {\n  return <header className={s.root}>Kraaft</header>;\n}\n\nexport default Header;\n","import React from 'react';\nimport Header from './components/Header';\nimport s from './index.module.css';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nfunction Layout({ children }: LayoutProps) {\n  return (\n    <div>\n      <Header />\n      <section className={s.content}>{children}</section>\n    </div>\n  );\n}\n\nexport default Layout;\n","import { useMemo, useState } from 'react';\nimport './app.css';\n\nimport { store } from './assets/store';\nimport Layout from './components/Layout';\n\nimport Conversation from './scenes/Conversation';\n\nconst App = () => {\n  const { messages: storeMessages } = store;\n  const [messages, setMessages] = useState(storeMessages);\n\n  const sorted = useMemo(\n    () => messages.sort((a, b) => a.createdAt - b.createdAt),\n    [messages],\n  );\n\n  return (\n    <Layout>\n      <Conversation messages={sorted} onChange={setMessages} />\n    </Layout>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}